{
  "pluginType": "DB",
  "pluginId": "mysql-plugin",
  "unpublishedAction": {
    "name": "Estimate_Select",
    "datasource": {
      "name": "appsmithmysql",
      "pluginId": "mysql-plugin",
      "messages": [],
      "isAutoGenerated": false,
      "id": "appsmithmysql",
      "deleted": false,
      "policies": [],
      "userPermissions": []
    },
    "pageId": "Estimate Request",
    "actionConfiguration": {
      "timeoutInMillisecond": 10000,
      "paginationType": "NONE",
      "encodeParamsToggle": true,
      "body": "SELECT Estimate.Id AS EId, \n       Estimate.currentState AS EstimateState,\n\t\t\t Sales.*,  \n\t\t\t Estimate.EmailList AS EmailList, \n\t\t\t Estimate.CCEmailList AS CCEmailList, \n\t\t\t Estimate.Notes AS Notes, \n\t\t\t Company.Name AS Company, \n\t\t\t BusinessUnit.Name AS BusinessUnit, \n\t\t\t Client.Name AS Client \nFROM   Estimate \n      INNER JOIN Sales \n\t\t  INNER JOIN Client ON Sales.ClientId = Client.Id\n\t\t  INNER JOIN BusinessUnit ON Sales.BusinessUnitId = BusinessUnit.Id\n\t\t  INNER JOIN Company ON Sales.CompanyId = Company.Id\n\t\t\tLEFT JOIN AppUser AS BusinessManager ON Sales.BusinessManagerId = BusinessManager.Id \nWHERE Estimate.SalesId = Sales.Id \n\t\t  AND Estimate.CurrentState = {{EstimateState_Select.selectedOptionValue}}\n\t\t  AND Estimate.Deleted = 0\n\t\t\tAND (\n        (\n            '{{appsmith.store.FilterRole}}' = 'BusinessManager'\n            AND BusinessManager.UserName = '{{appsmith.user.username.split('@')[0]}}'\n        )\n        OR\n        '{{appsmith.store.FilterRole}}' = 'SalesManager'\n    )\nORDER BY \n      Estimate.Id;",
      "selfReferencingDataPaths": []
    },
    "executeOnLoad": true,
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "isValid": true,
    "invalids": [],
    "messages": [],
    "jsonPathKeys": [
      "EstimateState_Select.selectedOptionValue",
      "appsmith.store.FilterRole",
      "appsmith.user.username.split('@')[0]"
    ],
    "userSetOnLoad": false,
    "confirmBeforeExecute": false,
    "policies": [],
    "userPermissions": [],
    "createdAt": "2024-04-25T09:02:08Z"
  },
  "id": "Estimate Request_Estimate_Select",
  "deleted": false,
  "gitSyncId": "63e5d847e80cbd4992442eae_63e5d849e80cbd4992442f3d"
}